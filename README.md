# CuteGirl
<div align="center">
<img style="max-width:50%;" src="logo.png" alt="CuteGirl" />
<br>
</div>

<div align="center">
  
</div>

## é¡¹ç›®ç®€ä»‹

CuteGirl æ˜¯ä¸€ä¸ªåŸºäº Python å¼€å‘çš„å¤šæºå½±è§†èµ„æºä¸‹è½½ç®¡ç†å·¥å…·ï¼Œæ”¯æŒä»å¤šä¸ªæ•°æ®æºè‡ªåŠ¨ä¸‹è½½ã€æ•´ç†å’Œåˆ®å‰Šå½±è§†èµ„æºã€‚

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸‹è½½å™¨ï¼Œå¹¶æä¾›äº†å®Œæ•´çš„å…ƒæ•°æ®ç®¡ç†åŠŸèƒ½å’Œé…å¥—æœåŠ¡ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸ¥ å¤šæºä¸‹è½½æ”¯æŒï¼šæ”¯æŒ MissAVã€Jableã€HohoJã€Memo ï¼ˆæŒç»­æ·»åŠ ä¸­ï¼‰ç­‰å¤šä¸ªæ•°æ®æº
- ğŸ“ æ™ºèƒ½å…ƒæ•°æ®ç®¡ç†ï¼šä»JavBusè‡ªåŠ¨è·å–å½±ç‰‡ä¿¡æ¯ã€å°é¢ã€æµ·æŠ¥ç­‰å…ƒæ•°æ®
- ğŸ”„ é˜Ÿåˆ—ç®¡ç†ï¼šæ”¯æŒæ‰¹é‡ä¸‹è½½ä»»åŠ¡ç®¡ç†ã€‚ä½¿ç”¨sqliteå»é‡ï¼Œé˜²æ­¢é‡å¤ä¸‹è½½
- ğŸŒ è¿œç¨‹æ§åˆ¶ï¼šæä¾› HTTP API æ¥å£ï¼Œæ”¯æŒè¿œç¨‹æ§åˆ¶ä¸‹è½½ä»»åŠ¡
- ğŸ”’ æ–‡ä»¶é”æœºåˆ¶ï¼šç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä¸‹è½½ä»»åŠ¡è¿è¡Œ
- ğŸ¨ åª’ä½“æœåŠ¡å™¨å…¼å®¹ï¼šè‡ªåŠ¨ç”Ÿæˆ NFO æ–‡ä»¶ï¼Œæ”¯æŒä¸»æµåª’ä½“æœåŠ¡å™¨
## ç³»ç»Ÿé¢„è§ˆ(WEB)
![](home.png)
![](login.png)
![](screenshot1.png)
![](screenshot2.png)
![](screenshot3.png)
![](screenshot4.png)
![](screenshot5.png)
## ç³»ç»Ÿé¢„è§ˆï¼ˆæ‰‹æœºï¼‰
![](IMG_4749.PNG)
## Jellyfiné¢„è§ˆ

![](screenshot1.png)

# NASSAV Docker éƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

NASSAV æä¾›å®Œæ•´çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²æ‰€æœ‰æœåŠ¡ã€‚

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚    Backend      â”‚    â”‚   Downloader    â”‚
â”‚  (Vue.js)       â”‚â—„â”€â”€â”€â”¤   (Go API)      â”‚â—„â”€â”€â”€â”¤  (Python)       â”‚
â”‚  Port: 80       â”‚    â”‚  Port: 31471    â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â”‚              â”‚   MissAV API    â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  (FastAPI)      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚  Port: 8000     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  qBittorrent    â”‚
                    â”‚  Port: 8080     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿè¦æ±‚

- Docker >= 20.10
- Docker Compose >= 2.0
- è‡³å°‘ 4GB å¯ç”¨å†…å­˜
- è‡³å°‘ 10GB å¯ç”¨ç£ç›˜ç©ºé—´

### 2. ä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone <é¡¹ç›®åœ°å€>
cd NASSAV

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./docker-start.sh
```

### 3. æ‰‹åŠ¨éƒ¨ç½²

```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data/{movie,db,qbittorrent/config} logs

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## æœåŠ¡è®¿é—®

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ç•Œé¢ | http://localhost | ä¸»è¦ç•Œé¢ |
| åç«¯API | http://localhost:31471 | REST API |
| MissAV API | http://localhost:8000 | ç¬¬ä¸‰æ–¹ API |
| API æ–‡æ¡£ | http://localhost:8000/docs | FastAPI æ–‡æ¡£ |
| qBittorrent | http://localhost:8080 | ç§å­ç®¡ç† |

### é»˜è®¤è´¦æˆ·

- **qBittorrent**: admin / adminpass

## ç›®å½•ç»“æ„

```
cute-girl/
â”œâ”€â”€ docker-compose.yml          # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ docker-compose.prod.yml     # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ docker-start.sh             # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker-build.sh             # é•œåƒæ„å»ºè„šæœ¬
â”œâ”€â”€ docker-init.sh              # ç¯å¢ƒåˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docker-health-check.sh      # å¥åº·æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ .env.docker                 # ç¯å¢ƒå˜é‡
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ movie/                  # è§†é¢‘æ–‡ä»¶
â”‚   â”œâ”€â”€ db/                     # æ•°æ®åº“æ–‡ä»¶
â”‚   â””â”€â”€ qbittorrent/            # qBittorrent é…ç½®
â”œâ”€â”€ logs/                       # æ—¥å¿—ç›®å½•
â”œâ”€â”€ Dockerfile                  # ä¸»é¡¹ç›®é•œåƒ (ä¼˜åŒ–ç‰ˆ)
â”œâ”€â”€ .dockerignore              # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ backend/Dockerfile          # Go åç«¯
â”œâ”€â”€ frontend/Dockerfile         # Vue å‰ç«¯
â””â”€â”€ MissAV-API/Dockerfile      # MissAV API
```

## ğŸ“¦ é•œåƒæ¶æ„ä¼˜åŒ–

### è‡ªåŒ…å«é•œåƒè®¾è®¡
- **ä¸»ä¸‹è½½å™¨**: `nassav/downloader` - å®Œæ•´æ‰“åŒ…Pythonä»£ç ã€ä¾èµ–å·¥å…·å’Œé»˜è®¤é…ç½®
- **Goåç«¯**: `nassav/backend` - ç‹¬ç«‹APIæœåŠ¡å™¨
- **Vueå‰ç«¯**: `nassav/frontend` - é™æ€æ–‡ä»¶æœåŠ¡  
- **MissAV API**: `nassav/missav-api` - ç¬¬ä¸‰æ–¹APIæœåŠ¡

### ä¼˜åŒ–çš„æŒ‚è½½ç­–ç•¥
- **æ•°æ®æŒä¹…åŒ–**: `/data/movie` (è§†é¢‘), `/app/db` (æ•°æ®åº“), `/app/logs` (æ—¥å¿—)
- **é…ç½®è¦†ç›–**: åªæŒ‚è½½ `configs.json` è¦†ç›–é•œåƒå†…é»˜è®¤é…ç½®
- **ä»£ç å†…ç½®**: æ‰€æœ‰æºç ã€å·¥å…·ã€ä¾èµ–éƒ½æ‰“åŒ…åˆ°é•œåƒï¼Œæ— éœ€æŒ‚è½½æºç ç›®å½•
- **å‡å°‘ä¾èµ–**: æ¶ˆé™¤äº†å¯¹å®¿ä¸»æœºæºç çš„ä¾èµ–ï¼Œæé«˜éƒ¨ç½²ä¸€è‡´æ€§

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env.docker)

```bash
# æ•°æ®è·¯å¾„
DATA_PATH=./data
MOVIE_PATH=./data/movie
DB_PATH=./data/db

# æœåŠ¡ç«¯å£
BACKEND_PORT=31471
FRONTEND_PORT=80
QBITTORRENT_PORT=8080

# qBittorrent è´¦æˆ·
QB_USERNAME=admin
QB_PASSWORD=adminpass
```

### æ•°æ®å·æ˜ å°„

| å®¹å™¨è·¯å¾„ | å®¿ä¸»è·¯å¾„ | è¯´æ˜ |
|----------|----------|------|
| `/data/movie` | `./data/movie` | è§†é¢‘ä¸‹è½½ç›®å½• |
| `/app/db` | `./data/db` | æ•°æ®åº“æ–‡ä»¶ |
| `/app/logs` | `./logs` | åº”ç”¨æ—¥å¿— |
| `/config` | `./data/qbittorrent/config` | qBittorrent é…ç½® |

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. ä½¿ç”¨ç”Ÿäº§é…ç½®

```bash
# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®
docker-compose -f docker-compose.prod.yml up -d

# æˆ–æŒ‡å®šæ•°æ®ç›®å½•
DATA_PATH=/opt/nassav/data docker-compose -f docker-compose.prod.yml up -d
```

### 2. æŒä¹…åŒ–æ•°æ®

```bash
# åˆ›å»º Docker å·
docker volume create nassav_movie_data
docker volume create nassav_db_data

# ä¿®æ”¹ docker-compose.prod.yml ä¸­çš„å·æ˜ å°„
```

### 3. SSL/HTTPS é…ç½®

```bash
# åˆ›å»º SSL è¯ä¹¦ç›®å½•
mkdir -p nginx/ssl

# æ”¾ç½®è¯ä¹¦æ–‡ä»¶
cp your-cert.pem nginx/ssl/
cp your-key.pem nginx/ssl/

# æ›´æ–° nginx é…ç½®ä»¥å¯ç”¨ HTTPS
```

## å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f downloader
docker-compose logs -f backend
docker-compose logs -f frontend

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—
docker-compose logs --tail=100 downloader
```

### æ•°æ®ç®¡ç†

```bash
# å¤‡ä»½æ•°æ®
tar -czf nassav-backup-$(date +%Y%m%d).tar.gz data/

# æ¢å¤æ•°æ®
tar -xzf nassav-backup-20231201.tar.gz

# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker system prune
```

### é•œåƒç®¡ç†

```bash
# æ„å»ºæ‰€æœ‰é•œåƒ
./docker-build.sh

# æ„å»ºæŒ‡å®šç‰ˆæœ¬
./docker-build.sh v1.0.0

# æ„å»ºå¹¶æ¨é€åˆ°Registry
./docker-build.sh v1.0.0 your-registry.com

# ä½¿ç”¨Makefileæ„å»º
make build-prod
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep :80
   netstat -tlnp | grep :31471
   
   # ä¿®æ”¹ç«¯å£æ˜ å°„
   vim docker-compose.yml
   ```

2. **æƒé™é—®é¢˜**
   ```bash
   # æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
   ls -la data/
   
   # ä¿®å¤æƒé™
   sudo chown -R $USER:$USER data/
   chmod -R 755 data/
   ```

3. **å†…å­˜ä¸è¶³**
   ```bash
   # æŸ¥çœ‹å†…å­˜ä½¿ç”¨
   docker stats
   
   # é™åˆ¶å®¹å™¨å†…å­˜
   # åœ¨ docker-compose.yml ä¸­æ·»åŠ :
   deploy:
     resources:
       limits:
         memory: 2G
   ```

4. **ç½‘ç»œé—®é¢˜**
   ```bash
   # æ£€æŸ¥å®¹å™¨ç½‘ç»œ
   docker network ls
   docker network inspect nassav_nassav-network
   
   # é‡å»ºç½‘ç»œ
   docker-compose down
   docker network prune
   docker-compose up -d
   ```

### è°ƒè¯•æ¨¡å¼

```bash
# è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose exec downloader /bin/bash
docker-compose exec backend /bin/sh

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs nassav-downloader
docker logs nassav-backend

# å®æ—¶ç›‘æ§
watch docker-compose ps
```

## å‡çº§æŒ‡å—

### 1. å¤‡ä»½æ•°æ®

```bash
docker-compose down
tar -czf backup-$(date +%Y%m%d).tar.gz data/ logs/
```

### 2. æ›´æ–°ä»£ç 

```bash
git pull origin main
```

### 3. é‡å»ºé•œåƒ

```bash
docker-compose build --no-cache
docker-compose up -d
```

### 4. éªŒè¯å‡çº§

```bash
docker-compose ps
docker-compose logs -f
```

## ç›‘æ§

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost/api/videos
curl http://localhost:31471/api/downloads
```

### æ—¥å¿—ç›‘æ§

```bash
# å®æ—¶æ—¥å¿—ç›‘æ§
docker-compose logs -f | grep -i error
```

### èµ„æºç›‘æ§

```bash
# å®¹å™¨èµ„æºä½¿ç”¨
docker stats --no-stream

# ç£ç›˜ä½¿ç”¨
du -sh data/*
```

## æ€§èƒ½ä¼˜åŒ–

1. **è°ƒæ•´å®¹å™¨èµ„æºé™åˆ¶**
2. **ä½¿ç”¨ SSD å­˜å‚¨**
3. **è°ƒæ•´å¹¶å‘ä¸‹è½½æ•°**
4. **å¯ç”¨æ—¥å¿—è½®è½¬**

## å®‰å…¨å»ºè®®

1. **æ›´æ”¹é»˜è®¤å¯†ç **
2. **ä½¿ç”¨é˜²ç«å¢™é™åˆ¶ç«¯å£è®¿é—®**
3. **å¯ç”¨ HTTPS**
4. **å®šæœŸå¤‡ä»½æ•°æ®**
5. **åŠæ—¶æ›´æ–°é•œåƒ**


## ç³»ç»Ÿè¦æ±‚

- **ç¨³å®šçš„ç½‘ç»œè¿æ¥å’Œä»£ç†æœåŠ¡**
- Python 3.11.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- FFmpeg
- Go 1.22.6 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆä»…ç”¨äºç¼–è¯‘ HTTP æœåŠ¡å™¨ï¼‰

## å®‰è£…æŒ‡å—

1. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š
```bash
git clone  https://github.com/gentlemen695/CuteGirl.git
pip3 install -r requirements.txt
```

2. å®‰è£… FFmpegï¼š
```bash
sudo apt install ffmpeg
```

3. é…ç½®é¡¹ç›®ï¼š
   - å¤åˆ¶ `cfg/configs.json.example` ä¸º `cfg/configs.json`
   - ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å…³é”®å‚æ•°ï¼š
     - `SavePath`ï¼šè®¾ç½®è§†é¢‘ä¿å­˜è·¯å¾„
     - `Proxy`ï¼šé…ç½®ä»£ç†æœåŠ¡å™¨åœ°å€ï¼ˆå¦‚æœä¸éœ€è¦ä½¿ç”¨ä»£ç†ï¼Œè®¾ç½®æˆ""å³å¯ï¼‰
     - `Downloader`ï¼šé…ç½®ä¸‹è½½å™¨åŠå…¶ä¼˜å…ˆçº§
     - `IsNeedVideoProxy`ï¼šä¸‹è½½è§†é¢‘æ˜¯å¦ä½¿ç”¨ä»£ç†

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

0. åˆå§‹åŒ–ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚ä¸»è¦å…³æ³¨çš„å­—æ®µï¼š
    - SavePathï¼šä¸‹è½½ä¿å­˜çš„ä½ç½®
    - Proxyï¼šhttpä»£ç†æœåŠ¡å™¨urlï¼ˆå¦‚æœä¸éœ€è¦ä½¿ç”¨ä»£ç†ï¼Œè®¾ç½®æˆ""å³å¯ï¼‰
    - IsNeedVideoProxyï¼šä¸‹è½½è§†é¢‘æ˜¯å¦ä½¿ç”¨ä»£ç†
```json
{
    "LogPath": "./logs",
    "SavePath": "/vol2/1000/MissAV",
    "DBPath": "./db/downloaded.db",
    "QueuePath": "./db/download_queue.txt",
    "Proxy": "http://127.0.0.1:7897",
    "IsNeedVideoProxy": false,
}
```

1. å¦‚æœæœ¬åœ°å·²æœ‰èµ„æºï¼Œéœ€è¦å…ˆæ•´ç†ç›®å½•ç»“æ„ï¼Œè½¦ç‰Œå·å¤§å†™ä½œä¸ºæ–‡ä»¶å¤¹åå­—ï¼Œè§†é¢‘åŒåæ”¾åœ¨æ–‡ä»¶å¤¹é‡Œé¢ï¼š

```
...
â”œâ”€â”€ SVGAL-009
â”‚Â Â  â””â”€â”€ SVGAL-009.mp4
â”œâ”€â”€ STCVS-007
â”‚Â Â  â””â”€â”€ STCVS-007.mp4
...
```
ç„¶åæ‰§è¡Œ`python3 metadata.py`ï¼Œçˆ¬å–å…ƒæ•°æ®ã€‚æœ€åç”Ÿæˆçš„ç›®å½•ç»“æ„ï¼š
```
...
â”œâ”€â”€ SVGAL-009
â”‚Â Â  â”œâ”€â”€ metadata.json
â”‚Â Â  â”œâ”€â”€ SVGAL-009-fanart.jpg
â”‚Â Â  â”œâ”€â”€ SVGAL-009.mp4
â”‚Â Â  â”œâ”€â”€ SVGAL-009.nfo
â”‚Â Â  â””â”€â”€ SVGAL-009-poster.jpg
â”œâ”€â”€ thumb
â”‚Â Â  â”œâ”€â”€ JULIA.jpg
â”‚Â Â  â”œâ”€â”€ ã¡ã‚ƒã‚“ã‚ˆãŸ.jpg
â”‚Â Â  â”œâ”€â”€ ä¸ƒæ£®è‰è‰.jpg
â”‚Â Â  â”œâ”€â”€ ä¸ƒæ³½ç±³äºš.jpg
...
```

2. ä¸‹è½½å•ä¸ªèµ„æºï¼š
```bash
python3 main.py <è½¦ç‰Œå·>
```

3. å¼ºåˆ¶ä¸‹è½½ï¼ˆå¿½ç•¥é‡å¤æ£€æŸ¥ï¼‰ï¼š
```bash
python3 main.py <è½¦ç‰Œå·> -f
```

### æ‰¹é‡ä¸‹è½½

1. å°†è½¦ç‰Œå·æ·»åŠ åˆ° `db/download_queue.txt` ä¸­
2. è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š
```bash
20 * * * * cd /path/to/NASSAV && bash cron_task.sh
```

### HTTP API æœåŠ¡

1. ç¼–è¯‘å¹¶å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼š
```bash
cd server
go build -o main
./main
```

2. å‘é€ä¸‹è½½è¯·æ±‚ï¼š
```bash
curl -X POST http://127.0.0.1:49530/process -d "è½¦ç‰Œå·"
```

### å‰åç«¯æœåŠ¡

åˆ®å‰Šæ—¶ä¸‹è½½äº†å¤§é‡fanartï¼Œæ•…æä¾›ä¸€ä¸ªç½‘é¡µé¢„è§ˆã€‚

åç«¯æä¾›äº†ä¸¤ä¸ªAPIï¼š
1. è·å–è½¦ç‰Œå·åˆ—è¡¨ï¼š/api/videos
2. è·å–è½¦ç‰Œå·è¯¦ç»†ä¿¡æ¯ï¼š/api/videos/FPRE-017

è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š
```
/api/videos
-----------------------------
[{"id":"ACHJ-057","title":"ACHJ-057 æ™‚ã«ã¯å‹æ‰‹ã«ç—´å¥³ã‚ŠãŸã„â€¦ã€‚Madonnaå°‚å± ç©¶æ¥µç¾ç†Ÿå¥³ã€ã‚ãã‚Šã€ãŠè²¸ã—ã—ã¾ã™ãƒ¼ã€‚","poster":"/file/ACHJ-057/ACHJ-057-poster.jpg"},{"id":"ADN-604","title":"ADN-604 ãŠç¾©çˆ¶ã•ã‚“ã¯ç§ã®äº‹ã€ã©ã†æ€ã£ã¦ã¾ã™ã‹ï¼Ÿ ä¸ƒæµ·ãƒ†ã‚£ãƒŠ","poster":"/file/ADN-604/ADN-604-poster.jpg"},{"id":"AGAV-122","title":"AGAV-122 é¡”ã§æŠœãï¼ï¼é¡”é¢ãƒ‰ã‚¢ãƒƒãƒ—POV é–¢è¥¿å¼ã§ã‚¤ãƒãƒ£ã‚µãƒ‰å°„ç²¾ç®¡ç†ã—ã¦ãã‚‹å¹´ä¸Šå½¼å¥³ã¨ã®åŒæ£²ç”Ÿæ´» æµå·è‰å¤®","poster":"/file/AGAV-122/AGAV-122-poster.jpg"},...]

/api/videos/FPRE-017
-----------------------------
{"id":"FPRE-017","title":"FPRE-017 çˆ†ä¹³ã‚»ãƒ¬ãƒ–ç—´å¥³ã«è¦‹ã¤ã‚ã‚‰ã‚Œã¦çŠ¯â—ã‚ŒãŸã„ èŠä¹ƒã‚‰ã‚“","releaseDate":"2024-02-02","fanarts":["/file/FPRE-017/FPRE-017-fanart-1.jpg","/file/FPRE-017/FPRE-017-fanart-10.jpg","/file/FPRE-017/FPRE-017-fanart-11.jpg","/file/FPRE-017/FPRE-017-fanart-12.jpg","/file/FPRE-017/FPRE-017-fanart-13.jpg","/file/FPRE-017/FPRE-017-fanart-14.jpg","/file/FPRE-017/FPRE-017-fanart-15.jpg","/file/FPRE-017/FPRE-017-fanart-16.jpg","/file/FPRE-017/FPRE-017-fanart-17.jpg","/file/FPRE-017/FPRE-017-fanart-18.jpg","/file/FPRE-017/FPRE-017-fanart-19.jpg","/file/FPRE-017/FPRE-017-fanart-2.jpg","/file/FPRE-017/FPRE-017-fanart-20.jpg","/file/FPRE-017/FPRE-017-fanart-21.jpg","/file/FPRE-017/FPRE-017-fanart-3.jpg","/file/FPRE-017/FPRE-017-fanart-4.jpg","/file/FPRE-017/FPRE-017-fanart-5.jpg","/file/FPRE-017/FPRE-017-fanart-6.jpg","/file/FPRE-017/FPRE-017-fanart-7.jpg","/file/FPRE-017/FPRE-017-fanart-8.jpg","/file/FPRE-017/FPRE-017-fanart-9.jpg","/file/FPRE-017/FPRE-017-fanart.jpg"],"videoFile":"/file/FPRE-017/FPRE-017.mp4"}
```

æ®æ­¤ä½¿ç”¨Vueå®ç°ä¸€ä¸ªå‰ç«¯ï¼Œé¢„è§ˆlistå’Œdetailã€‚

listé¡µï¼š
![](pic/gallery-list.png)
detailé¡µï¼š
![](pic/gallery-detail.png)

## é…ç½®è¯´æ˜

### ä¸‹è½½å™¨é…ç½®

åœ¨ `configs.json` ä¸­å¯ä»¥é…ç½®å¤šä¸ªä¸‹è½½æºåŠå…¶ä¼˜å…ˆçº§ï¼š

```json
"Downloader": [
    {
        "downloaderName": "MissAV",
        "domain": "missav.ai",
        "weight": 300
    },
    {
        "downloaderName": "Jable",
        "domain": "jable.tv",
        "weight": 500
    },
    {
        "downloaderName": "HohoJ",
        "domain": "hohoj.tv",
        "weight": 0
    }
]
```

### æ•°æ®æºè¯´æ˜

1. **MissAV**
   - ä¼˜ç‚¹ï¼šèµ„æºå…¨é¢ï¼Œåçˆ¬é™åˆ¶è¾ƒå°‘
   - ç¼ºç‚¹ï¼šæ¸…æ™°åº¦ä¸€èˆ¬ï¼ˆ720p-1080pï¼‰

2. **Jable**
   - ä¼˜ç‚¹ï¼šä¸­æ–‡å­—å¹•èµ„æºå¤šï¼Œæ¸…æ™°åº¦é«˜ï¼ˆ1080pï¼‰
   - ç¼ºç‚¹ï¼šåçˆ¬é™åˆ¶è¾ƒä¸¥æ ¼

3. **HohoJ**
   - ä¼˜ç‚¹ï¼šæ¸…æ™°åº¦é«˜ï¼ˆ1080pï¼‰ï¼ŒåŸºæœ¬æ— åçˆ¬é™åˆ¶
   - ç¼ºç‚¹ï¼šä¸­æ–‡å­—å¹•èµ„æºè¾ƒå°‘

4. **Memo**
   - ä¼˜ç‚¹ï¼šèµ„æºè¾ƒæ–°ï¼Œæ›´æ–°åŠæ—¶
   - ç¼ºç‚¹ï¼šéƒ¨åˆ†èµ„æºéœ€è¦ä¼šå‘˜


## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ä¸‹è½½å™¨

1. åœ¨ `src/downloader/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ä¸‹è½½å™¨ç±»
2. ç»§æ‰¿ `Downloader` åŸºç±»ï¼Œå®ç°å¿…è¦çš„æ–¹æ³•ï¼š
   - `getDownloaderName()`
   - `getHTML()`
   - `parseHTML()`
3. åœ¨ `DownloaderMgr` ä¸­æ³¨å†Œæ–°ä¸‹è½½å™¨
4. åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®é¡¹

ç¤ºä¾‹ä»£ç ï¼š
```python
class NewDownloader(Downloader):
    def getDownloaderName(self) -> str:
        return "NewDownloader"

    def getHTML(self, avid: str) -> Optional[str]:
        # å®ç°è·å–HTMLçš„é€»è¾‘
        pass

    def parseHTML(self, html: str) -> Optional[AVDownloadInfo]:
        # å®ç°è§£æHTMLçš„é€»è¾‘
        pass
```
### æœ‰éœ€æ±‚è¯·è‡ªè¡Œforkä¿®æ”¹ï¼Œå¦‚æœæƒ³è¦è´¡çŒ®ä»£ç å‘èµ·PRå³å¯

![](pic/IMG_5150.JPG)

## æ³¨æ„äº‹é¡¹

- ä½¿ç”¨æœ¬é¡¹ç›®éœ€è¦ç¨³å®šçš„ä»£ç†æœåŠ¡
- è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œåˆç†ä½¿ç”¨æœ¬å·¥å…·
- å»ºè®®å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶
- ä¸‹è½½è¿‡ç¨‹ä¸­è¯·ç¡®ä¿ç½‘ç»œç¨³å®š
- ä¸‹è½½é¢‘ç‡ä¸è¦è¿‡é«˜ã€‚å¦åˆ™ä¼šè¢«cloudflareå®‰æ’è¿›è´¤è€…æ—¶é—´

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚ 
